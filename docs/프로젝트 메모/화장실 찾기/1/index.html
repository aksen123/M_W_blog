<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-프로젝트 메모/화장실 찾기/1" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">화장실api 조회 방식 변경 | M_W</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://aksen123.github.io/M_W_blog/img/ms2.jpg"><meta data-rh="true" name="twitter:image" content="https://aksen123.github.io/M_W_blog/img/ms2.jpg"><meta data-rh="true" property="og:url" content="https://aksen123.github.io/M_W_blog/docs/프로젝트 메모/화장실 찾기/1"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="M_W, blog"><meta data-rh="true" name="og:title" content="내가만듦"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="화장실api 조회 방식 변경 | M_W"><meta data-rh="true" name="description" content="화장실 찾기 페이지를 만들면서 처음엔 드래그가 끝나거나 줌 레벨이 바뀔 때 마다 api를 호출해 해당 지도 범위 내의 화장실을 표시 하는 방법으로 만들었다."><meta data-rh="true" property="og:description" content="화장실 찾기 페이지를 만들면서 처음엔 드래그가 끝나거나 줌 레벨이 바뀔 때 마다 api를 호출해 해당 지도 범위 내의 화장실을 표시 하는 방법으로 만들었다."><link data-rh="true" rel="icon" href="/M_W_blog/img/favicon.png"><link data-rh="true" rel="canonical" href="https://aksen123.github.io/M_W_blog/docs/프로젝트 메모/화장실 찾기/1"><link data-rh="true" rel="alternate" href="https://aksen123.github.io/M_W_blog/docs/프로젝트 메모/화장실 찾기/1" hreflang="en"><link data-rh="true" rel="alternate" href="https://aksen123.github.io/M_W_blog/docs/프로젝트 메모/화장실 찾기/1" hreflang="x-default"><link rel="stylesheet" href="/M_W_blog/assets/css/styles.6ec1915e.css">
<script src="/M_W_blog/assets/js/runtime~main.11c6b061.js" defer="defer"></script>
<script src="/M_W_blog/assets/js/main.a6c12348.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/M_W_blog/"><div class="navbar__logo"><img src="/M_W_blog/img/favicon2.png" alt="M_W Blog" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/M_W_blog/img/favicon2.png" alt="M_W Blog" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">일단 기록하자</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/M_W_blog/docs/intro">끄적끄적</a><a class="navbar__item navbar__link" href="/M_W_blog/docs/tags">Tags</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/aksen123" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/M_W_blog/docs/intro">👋</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/M_W_blog/docs/category/메모">메모</a><button aria-label="Expand sidebar category &#x27;메모&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/M_W_blog/docs/category/유데미x스나이퍼팩토리">유데미x스나이퍼팩토리</a><button aria-label="Expand sidebar category &#x27;유데미x스나이퍼팩토리&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/M_W_blog/docs/category/공책">공책</a><button aria-label="Expand sidebar category &#x27;공책&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/M_W_blog/docs/MariaDB/1">MariaDB</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/M_W_blog/docs/category/docusaurus">Docusaurus</a><button aria-label="Expand sidebar category &#x27;Docusaurus&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/M_W_blog/docs/프로젝트 메모/kiosk/kiosk&amp;admin">프로젝트 메모</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/M_W_blog/docs/프로젝트 메모/kiosk/kiosk&amp;admin">kiosk</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/M_W_blog/docs/프로젝트 메모/화장실 찾기/1">화장실 찾기</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/M_W_blog/docs/프로젝트 메모/화장실 찾기/1">화장실api 조회 방식 변경</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/M_W_blog/docs/프로젝트 메모/화장실 찾기/2">화장실 데이터 넣기</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/M_W_blog/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">프로젝트 메모</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">화장실 찾기</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">화장실api 조회 방식 변경</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>화장실api 조회 방식 변경</h1></header><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>💡</div><div class="admonitionContent_BuS1"><p>화장실 찾기 페이지를 만들면서 처음엔 드래그가 끝나거나 줌 레벨이 바뀔 때 마다 api를 호출해 해당 지도 범위 내의 화장실을 표시 하는 방법으로 만들었다.
만들고 나서 생각해보니 지도가 움직일때마다 계속 api를 호출하게 된다면, 서버에 과부하가 걸릴수도 있고 속도나 성능에 문제가 있을수 있겠단 생각이 들어 호출하는 방식을 변경하기로 했다.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="기존-조회-방식">기존 조회 방식<a href="#기존-조회-방식" class="hash-link" aria-label="Direct link to 기존 조회 방식" title="Direct link to 기존 조회 방식">​</a></h2>
<blockquote>
<p>지도 레벨이 변경되거나 드래그가 끝날때 마다 api를 호출해 해당 지도범위의 화  장실을 표시 해줌 <br>
<code>Map</code>컴포넌트에 onDragEnd,onZoomChanged 이벤트를 주고 지도가 바뀔때 마다 범위 안의 화장실을 찾는 함수를 넣어 줌</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="변경-방식">변경 방식<a href="#변경-방식" class="hash-link" aria-label="Direct link to 변경 방식" title="Direct link to 변경 방식">​</a></h2>
<blockquote>
<p>지도 레벨이 변경되거나 드래그가 끝나면 <code>현위치에서 검색</code>이라는 버튼을 만들고 버튼을 클릭하면 api를 호출하고 해당 지도 범위 안의 화장실을 찾아서 표시해주는 방식으로 변경
<code>Map</code>컴포넌트에 onDragEnd,onZoomChanged 이벤트를 주고 검색 버튼을 보여주는 함수를 추가해서 지도가 바뀔때 마다 검색버튼을 보여지게 만들었다.</p>
</blockquote>
<table><thead><tr><th style="text-align:center">기존</th><th style="text-align:center">변경</th></tr></thead><tbody><tr><td style="text-align:center"><img loading="lazy" src="https://github.com/user-attachments/assets/ec55163e-ba06-4597-a981-887617420356" alt="iPhone-12-PRO-localhost-TA-YH0ezCh" class="img_ev3q"></td><td style="text-align:center"><img loading="lazy" src="https://github.com/user-attachments/assets/db5b3c9b-3e89-42e4-976a-3fd0e332bf4b" alt="iPhone-12-PRO-localhost-CoZ5Kx5rqZ" class="img_ev3q"></td></tr></tbody></table>
<br>
<br>
<p>이런식으로 변경 했다!!
지금이야 mariadb를 써보겠다고 내 pc에 서버를 두고 만들고 있다지만.
나중에 배포를 하고나서 클라우드 데이터베이스를 사용한다고 하면 위에서 말한 문제도 있지만 비용적인 문제도 있기 때문에 조회하는 방식을 이렇게 변경 했다.</p>
<p>좀더 추가 적으로 수정 해야할게 있긴 한데 지도 레벨이 큰레벨에서 작은 레벨로 돌아올때는(확대할 때) api를 호출 하지 않아도 될것 같은데 이건도 같이 추가 적으로 수정해야 한다.(검색버튼 안보이게)
아무튼 api호출을 최소한으로할 수있는 방식을 좀더 생각해 봐야겠다.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/M_W_blog/docs/프로젝트 메모/kiosk/kiosk&amp;admin2"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">kiosk, admin 추가 사항</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/M_W_blog/docs/프로젝트 메모/화장실 찾기/2"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">화장실 데이터 넣기</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#기존-조회-방식" class="table-of-contents__link toc-highlight">기존 조회 방식</a></li><li><a href="#변경-방식" class="table-of-contents__link toc-highlight">변경 방식</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>